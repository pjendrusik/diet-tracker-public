app {
  # Feature toggles documented in docs/dev-env.md so engineers can enable diet sharing locally
  featureFlags = ["feature.customFoodLogs", "feature.dietSharing"]

  http {
    host = "0.0.0.0"
    port = 8080
  }

  database {
    url = ${?DATABASE_URL}
    url = "jdbc:postgresql://localhost:5433/diettracker"
    user = ${?DATABASE_USER}
    user = "diettracker"
    password = ${?DATABASE_PASSWORD}
    password = "postgres"
    schema = "public"
  }

  sharing {
    # NFR-001 (Performance): dedicated topic so notification fan-out remains under the 30s SLA
    notificationTopic = ${?SHARING_NOTIFICATION_TOPIC}
    notificationTopic = "diet-sharing-events"
    # NFR-003 (Audit & Retention): keep lifecycle events for â‰¥12 months
    auditRetentionDays = ${?SHARING_AUDIT_RETENTION_DAYS}
    auditRetentionDays = 365
    maxRecipientsPerDiet = ${?SHARING_MAX_RECIPIENTS}
    maxRecipientsPerDiet = 5
    copyLockTimeoutSeconds = ${?SHARING_COPY_LOCK_TIMEOUT}
    copyLockTimeoutSeconds = 10

    metrics {
      # NFR-004 (Observability): metric identifiers surfaced in monitoring dashboards
      shareSuccessCounter = ${?SHARING_SHARE_SUCCESS_METRIC}
      shareSuccessCounter = "diet_sharing_share_success_total"
      shareLatencyTimer = ${?SHARING_SHARE_LATENCY_METRIC}
      shareLatencyTimer = "diet_sharing_share_latency_ms"
      revokeLatencyTimer = ${?SHARING_REVOKE_LATENCY_METRIC}
      revokeLatencyTimer = "diet_sharing_revoke_latency_ms"
      copySuccessCounter = ${?SHARING_COPY_SUCCESS_METRIC}
      copySuccessCounter = "diet_sharing_copy_success_total"
      copyLatencyTimer = ${?SHARING_COPY_LATENCY_METRIC}
      copyLatencyTimer = "diet_sharing_copy_latency_ms"
      notificationDeliveryTimer = ${?SHARING_NOTIFICATION_LATENCY_METRIC}
      notificationDeliveryTimer = "diet_sharing_notification_latency_ms"
      recipientListLatencyTimer = ${?SHARING_RECIPIENT_LIST_LATENCY_METRIC}
      recipientListLatencyTimer = "diet_sharing_recipient_list_latency_ms"
      recipientViewLatencyTimer = ${?SHARING_RECIPIENT_VIEW_LATENCY_METRIC}
      recipientViewLatencyTimer = "diet_sharing_recipient_view_latency_ms"
      revocationClosureCounter = ${?SHARING_REVOCATION_CLOSURE_METRIC}
      revocationClosureCounter = "diet_sharing_revocation_closure_total"
    }
  }
}
